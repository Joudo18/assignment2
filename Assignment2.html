<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Language Translation</title>
</head>

<body>
  <h1>üåç Language Translator</h1>

  <textarea id="textToTranslate" rows="4" cols="50" placeholder="Enter text to translate..."></textarea><br>

  <!-- Source language selection -->
  <label for="sourceLang">From: </label>
  <select id="sourceLang">
    <option value="">Auto Detect</option>
    <option value="ar">Arabic</option>
    <option value="en">English</option>
    <option value="de">German</option>
    <option value="fr">French</option>
    <option value="es">Spanish</option>
    <option value="it">Italian</option>
    <option value="nl">Dutch</option>
    <option value="pl">Polish</option>
    <option value="pt">Portuguese</option>
    <option value="ru">Russian</option>
    <option value="ja">Japanese</option>
    <option value="zh">Chinese</option>
  </select>

  <!-- Target language selection -->
  <label for="targetLang">To: </label>
  <select id="targetLang">
    <option value="en-US">English (US)</option>
    <option value="en-GB">English (UK)</option>
    <option value="pt-PT">Portuguese (Portugal)</option>
    <option value="pt-BR">Portuguese (Brazil)</option>
    <option value="de">German</option>
    <option value="fr">French</option>
    <option value="es">Spanish</option>
    <option value="it">Italian</option>
    <option value="nl">Dutch</option>
    <option value="pl">Polish</option>
    <option value="ru">Russian</option>
    <option value="ja">Japanese</option>
    <option value="zh">Chinese</option>
    <option value="ar">Arabic</option>
  </select><br><br>

  <button id="translateBtn">Translate</button>

  <h2>Translated Text:</h2>
  <p id="translatedText"></p>

  <script>
    document.getElementById('translateBtn').addEventListener('click', async () => {
      const text = document.getElementById('textToTranslate').value;
      const targetLang = document.getElementById('targetLang').value;
      const sourceLang = document.getElementById('sourceLang').value;

      if (!text || !targetLang) {
        alert('Please provide text and select a target language.');
        return;
      }

      try {
        const response = await fetch('https://assignment2-6lbj.onrender.com/translate', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            text: text,
            targetLang: targetLang,
            sourceLang: sourceLang === "" ? null : sourceLang
          })
        });

        if (response.ok) {
          const data = await response.json();
          document.getElementById('translatedText').textContent = data.translatedText;
        } else {
          document.getElementById('translatedText').textContent = '‚ùå Error during translation.';
        }
      } catch (error) {
        document.getElementById('translatedText').textContent = '‚ùå Server error or no connection.';
      }
    });
  </script>
</body>
</html>
